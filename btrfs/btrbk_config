# This is a sample btrbk configuration file.
# Lines starting with '#' are comments.

# --- Global Configuration ---

# The format for the timestamp in snapshot names.
# Recommended: YYYY-MM-DD-HHMM
timestamp_format          YYYY-MM-DD-HHMM

# The SSH identity file to use for authentication with the AWS server.
# This should be your private key.
ssh_identity              ~/.ssh/id_rsa_btrbk

# Define the global retention policy for both local and remote snapshots.
# This example keeps 7 daily, 4 weekly, and 6 monthly snapshots.
# Adjust to your needs. 'all' means all snapshots.
retention_policy          7d 4w 6m

# --- Subvolume Backups ---

# Backup the main /home subvolume
# This will create a snapshot of @home and send it to the AWS server.
# The remote path will be /backup_volume/backups/home.
subvolume /home
  snapshot_dir           .snapshots
  target                 ssh://user@your-aws-ec2.compute.amazonaws.com/backup_volume/backups/
  target_preserve_path   true

# Backup the user's KDE configuration.
# This is crucial for restoring desktop settings, themes, and application configurations.
# The remote path will be /backup_volume/backups/johndoe/.config.
subvolume /home/johndoe/.config
  snapshot_dir           .snapshots
  target                 ssh://user@your-aws-ec2.compute.amazonaws.com/backup_volume/backups/
  target_preserve_path   true

# Backup another user's home directory.
# This demonstrates how to back up multiple users' data.
subvolume /home/janedoe
  snapshot_dir           .snapshots
  target                 ssh://user@your-aws-ec2.compute.amazonaws.com/backup_volume/backups/
  target_preserve_path   true

# --- Btrbk Execution Flags ---
# You can add global flags here if needed.
# For example, to enable a dry-run check:
# btrbk_log_file             /var/log/btrbk.log
# btrbk_email_log_file       /var/log/btrbk.email.log
# btrbk_email_subject        "btrbk backup report"
# btrbk_email_recipient      your-email@example.com
